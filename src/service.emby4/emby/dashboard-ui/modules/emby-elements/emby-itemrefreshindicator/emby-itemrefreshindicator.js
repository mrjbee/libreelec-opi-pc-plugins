define(["emby-progressring","dom","serverNotifications","events","browser"],function(EmbyProgressRing,dom,serverNotifications,events,browser){"use strict";function addNotificationEvent(instance,name,handler){var localHandler=handler.bind(instance);events.on(serverNotifications,name,localHandler),instance[name]=localHandler}function removeNotificationEvent(instance,name){var handler=instance[name];handler&&(events.off(serverNotifications,name,handler),instance[name]=null)}function onRefreshProgress(e,apiClient,info){var indicator=this;if(indicator.itemId||(indicator.itemId=dom.parentWithAttribute(indicator,"data-id").getAttribute("data-id")),info.ItemId===indicator.itemId){var progress=parseFloat(info.Progress);progress&&progress<100?this.classList.remove("hide"):this.classList.add("hide"),this.setProgress(progress)}}function onInit(){var elem=this;elem.hasInit||(elem.hasInit=!0)}function _connectedCallback(){addNotificationEvent(this,"RefreshProgress",onRefreshProgress)}function _disconnectedCallback(){removeNotificationEvent(this,"RefreshProgress"),this.itemId=null}if(window.customElements){var EmbyItemRefreshIndicator=function(_EmbyProgressRing){function EmbyItemRefreshIndicator(){var _this;babelHelpers.classCallCheck(this,EmbyItemRefreshIndicator);var self=_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(EmbyItemRefreshIndicator).call(this));return onInit.call(self),babelHelpers.possibleConstructorReturn(_this,self)}return babelHelpers.inherits(EmbyItemRefreshIndicator,_EmbyProgressRing),babelHelpers.createClass(EmbyItemRefreshIndicator,[{key:"connectedCallback",value:function(){browser.customBuiltInElements||EmbyProgressRing.prototype.connectedCallback.call(this),_connectedCallback.call(this)}},{key:"disconnectedCallback",value:function(){browser.customBuiltInElements||EmbyProgressRing.prototype.disconnectedCallback.call(this),_disconnectedCallback.call(this)}}]),EmbyItemRefreshIndicator}(EmbyProgressRing);return customElements.define("emby-itemrefreshindicator",EmbyItemRefreshIndicator,{extends:"div"}),EmbyProgressRing}if(document.registerElement){var EmbyItemRefreshIndicatorPrototype=Object.create(EmbyProgressRing);EmbyItemRefreshIndicatorPrototype.createdCallback=function(){EmbyProgressRing.createdCallback&&EmbyProgressRing.createdCallback.call(this),onInit.call(this)},EmbyItemRefreshIndicatorPrototype.attachedCallback=function(){EmbyProgressRing.attachedCallback&&EmbyProgressRing.attachedCallback.call(this),_connectedCallback.call(this)},EmbyItemRefreshIndicatorPrototype.detachedCallback=function(){EmbyProgressRing.detachedCallback&&EmbyProgressRing.detachedCallback.call(this),_disconnectedCallback.call(this)},document.registerElement("emby-itemrefreshindicator",{prototype:EmbyItemRefreshIndicatorPrototype,extends:"div"})}});